"use strict";function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_unsupportedIterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(a,b){if(a){if("string"==typeof a)return _arrayLikeToArray(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(a,b):void 0}}function _iterableToArray(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a))return _arrayLikeToArray(a)}function _arrayLikeToArray(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}(function(a){"use strict";Drupal.behaviors.tableView={attach:function(b,c){var d=c.dynamicListData,e={DEFAULT_PAGE_SIZE:5,DEFAULT_PAGE_NO:1,ZERO:0,ONE:1,TABLE_COLUMNS:d.colData,COLUMNS_TO_FILTER:d.filterCols,IDENTIFIERS:{SEARCH_TERM:"search-term",LOAD_MORE:"load-more",SELECTABLE:"selectable"},STYLES:{NONE:"none",BLOCK:"block"},EVENTS:{CLICK:"click",KEY_UP:"keyup",CHANGE:"change"},COLUMN_SELECTION:d.selectCols},f=d.tableData,g=[],h=e.COLUMNS_TO_FILTER,i=e.COLUMN_SELECTION,j=new Tabulator("#table",{layout:"fitColumns",movableColumns:!0,data:f,columns:e.TABLE_COLUMNS,pagination:"local",paginationSize:50,paginationSizeSelector:[50,100]}),k=document.getElementById(e.IDENTIFIERS.SEARCH_TERM),l=document.getElementById(e.IDENTIFIERS.SELECTABLE),m=function(a){var b=!1;return h.map(function(c){(a[c]+"").toLowerCase().includes(k.value.toLowerCase())&&(b=!0)}),b},n=function(){g=f.filter(m),j.clearData(),p(g)},o=function(a){var b=document.createElement("div");return b.innerHTML=a,b.textContent||b.innerText||""};Object.keys(i).map(function(){document.addEventListener("change",function(a){"search-term"!==a.target.id&&(i[a.target.id].value=a.target.value,p(f))})});var p=function(a){g=a.filter(function(a){var b=[],c=[];return Object.keys(i).map(function(d){a[d].includes(i[d].value)&&""!==i[d].value&&b.push(i[d].value),""!==i[d].value&&c.push(i[d].value)}),b.length===c.length}),j.clearData(),j.addData(g)};h.length?(k.addEventListener(e.EVENTS.KEY_UP,n),k.addEventListener(e.EVENTS.CHANGE,n)):a(k).closest(".col-sm").addClass("hidden"),function renderSelectable(){Object.keys(i).map(function(a){var b=document.createElement("div");b.className="form-item__dropdown";var c=document.createElement("select");c.className="form-select form-item__select";var d=document.getElementById(a);if(!d){b.appendChild(c),l.appendChild(b),c.setAttribute("id",a);var g=document.createElement("option");g.text=i[a].placeholder,g.value="",g.selected=!0,c.appendChild(g),f.map(function(b){var d=_toConsumableArray(c.options).findIndex(function(c){return c.value===b[a]});if(d===-e.ONE){var f=o(b[a]);if(f===b[a]){var g=document.createElement("option");g.text=f,g.value=f,c.appendChild(g)}}})}})}()}}})(jQuery);